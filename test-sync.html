<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒæ­¥åŠŸèƒ½æµ‹è¯•é¡µé¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#64748b',
                        success: '#22c55e',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        info: '#0ea5e9',
                        light: '#f8fafc',
                        dark: '#1e293b'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .glass {
                background: rgba(255, 255, 255, 0.25);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.18);
            }
            .btn {
                @apply px-4 py-2 rounded-lg font-medium transition-all duration-200;
            }
            .btn-primary {
                @apply bg-primary text-white hover:bg-blue-600 active:bg-blue-700;
            }
            .btn-secondary {
                @apply bg-secondary text-white hover:bg-slate-600 active:bg-slate-700;
            }
            .btn-success {
                @apply bg-success text-white hover:bg-green-600 active:bg-green-700;
            }
            .btn-danger {
                @apply bg-danger text-white hover:bg-red-600 active:bg-red-700;
            }
            .card {
                @apply bg-white rounded-xl shadow-lg p-6 border border-gray-200;
            }
            .input {
                @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent;
            }
            .badge {
                @apply px-2 py-1 text-xs font-medium rounded-full;
            }
            .badge-blue {
                @apply bg-blue-100 text-blue-800;
            }
            .badge-green {
                @apply bg-green-100 text-green-800;
            }
            .badge-red {
                @apply bg-red-100 text-red-800;
            }
            .badge-yellow {
                @apply bg-yellow-100 text-yellow-800;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ğŸ“± åŒæ­¥åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
            <p class="text-gray-600">æµ‹è¯•äºŒç»´ç åŒæ­¥åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®æ­£ç¡®å¯¼å‡º</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- æµ‹è¯•æ§åˆ¶åŒº -->
            <div class="card">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ® æµ‹è¯•æ§åˆ¶</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">åŒæ­¥ç±»å‹</label>
                        <select id="syncType" class="input">
                            <option value="both">å…¨éƒ¨é¢˜ç›®</option>
                            <option value="public">ä»…å…¬å…±é¢˜åº“</option>
                            <option value="personal">ä»…ä¸ªäººé¢˜åº“</option>
                        </select>
                    </div>
                    
                    <div class="space-y-2">
                        <button id="generateQRBtn" class="btn btn-primary w-full">
                            <i class="fa fa-qrcode mr-2"></i>ç”ŸæˆåŒæ­¥äºŒç»´ç 
                        </button>
                        <button id="generateDataBtn" class="btn btn-secondary w-full">
                            <i class="fa fa-code mr-2"></i>ç”ŸæˆåŒæ­¥æ•°æ®
                        </button>
                        <button id="clearStorageBtn" class="btn btn-danger w-full">
                            <i class="fa fa-trash mr-2"></i>æ¸…ç©ºæœ¬åœ°å­˜å‚¨
                        </button>
                        <button id="addDemoDataBtn" class="btn btn-success w-full">
                            <i class="fa fa-plus-circle mr-2"></i>æ·»åŠ æ¼”ç¤ºæ•°æ®
                        </button>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®æ˜¾ç¤ºåŒº -->
            <div class="card">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ“Š æ•°æ®ç»Ÿè®¡</h2>
                <div class="space-y-4">
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium text-gray-700">å…¬å…±é¢˜åº“é¢˜ç›®æ•°:</span>
                        <span id="publicCount" class="text-2xl font-bold text-blue-600">0</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium text-gray-700">ä¸ªäººé¢˜åº“é¢˜ç›®æ•°:</span>
                        <span id="personalCount" class="text-2xl font-bold text-green-600">0</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium text-gray-700">æ€»é¢˜ç›®æ•°:</span>
                        <span id="totalCount" class="text-2xl font-bold text-purple-600">0</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium text-gray-700">è®¾å¤‡ID:</span>
                        <span id="deviceId" class="text-sm text-gray-600 font-mono">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- äºŒç»´ç æ˜¾ç¤ºåŒº -->
        <div id="qrCodeSection" class="mt-8 card hidden">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ“± åŒæ­¥äºŒç»´ç </h2>
            <div class="text-center">
                <div id="qrcode" class="inline-block"></div>
                <p id="qrCodeHint" class="text-gray-600 mt-4">è¯·ä½¿ç”¨æ‰‹æœºæ‰«æä¸Šæ–¹äºŒç»´ç è¿›è¡ŒåŒæ­¥</p>
            </div>
        </div>

        <!-- æ•°æ®æ˜¾ç¤ºåŒº -->
        <div id="dataSection" class="mt-8 card hidden">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-semibold text-gray-800">ğŸ“‹ åŒæ­¥æ•°æ®</h2>
                <button id="copyDataBtn" class="btn btn-sm btn-primary">
                    <i class="fa fa-copy mr-1"></i>å¤åˆ¶
                </button>
            </div>
            <div class="relative">
                <pre id="syncData" class="bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto max-h-96 text-sm font-mono"></pre>
            </div>
        </div>

        <!-- æ—¥å¿—æ˜¾ç¤ºåŒº -->
        <div class="mt-8 card">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-semibold text-gray-800">ğŸ“ æ“ä½œæ—¥å¿—</h2>
                <button id="clearLogBtn" class="btn btn-sm btn-danger">
                    <i class="fa fa-trash mr-1"></i>æ¸…ç©º
                </button>
            </div>
            <div class="bg-gray-900 text-gray-300 p-4 rounded-lg h-64 overflow-y-auto font-mono text-sm">
                <div id="logContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ™ºèƒ½åˆ·é¢˜ç³»ç»Ÿçš„æ•°æ®ç»“æ„å’Œæ–¹æ³•
        class MockExamSystem {
            constructor() {
                this.publicQuestionBank = [];
                this.personalQuestionBank = [];
                this.loadData();
            }

            loadData() {
                try {
                    const publicData = localStorage.getItem('publicQuestionBank');
                    const personalData = localStorage.getItem('personalQuestionBank');
                    
                    this.publicQuestionBank = publicData ? JSON.parse(publicData) : [];
                    this.personalQuestionBank = personalData ? JSON.parse(personalData) : [];
                    
                    this.log('ğŸ’¾ æ•°æ®åŠ è½½å®Œæˆ');
                    this.updateStats();
                } catch (error) {
                    this.log('âŒ æ•°æ®åŠ è½½å¤±è´¥:', error.message);
                }
            }

            saveData() {
                try {
                    localStorage.setItem('publicQuestionBank', JSON.stringify(this.publicQuestionBank));
                    localStorage.setItem('personalQuestionBank', JSON.stringify(this.personalQuestionBank));
                    this.log('ğŸ’¾ æ•°æ®ä¿å­˜å®Œæˆ');
                } catch (error) {
                    this.log('âŒ æ•°æ®ä¿å­˜å¤±è´¥:', error.message);
                }
            }

            getDeviceId() {
                let deviceId = localStorage.getItem('deviceId');
                if (!deviceId) {
                    deviceId = 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('deviceId', deviceId);
                }
                return deviceId;
            }

            // ç”ŸæˆåŒæ­¥äºŒç»´ç æ•°æ® - ä¿®å¤ç‰ˆæœ¬
            generateSyncQRData(syncType = 'both') {
                this.log(`ğŸ“Š å¼€å§‹ç”ŸæˆåŒæ­¥æ•°æ®ï¼Œç±»å‹: ${syncType}...`);
                
                // å¼ºåˆ¶æ·»åŠ ä¸°å¯Œçš„æ¼”ç¤ºé¢˜ç›®ï¼Œç¡®ä¿æœ‰å®é™…æ•°æ®
                this.log('ğŸ¯ å¼ºåˆ¶æ·»åŠ æ¼”ç¤ºé¢˜ç›®ä»¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§');
                
                let publicQuestions = [];
                let personalQuestions = [];
                
                // ç”Ÿæˆæ›´å¤šæ ·åŒ–çš„æ¼”ç¤ºé¢˜ç›®
                const richDemoPublicQuestions = [
                    {
                        id: 'rich_pub_1_' + Date.now(),
                        content: 'HTML5ä¸­ç”¨äºå®šä¹‰æ–‡æ¡£ä¸»è¦å†…å®¹çš„æ ‡ç­¾æ˜¯ï¼š',
                        type: 'single',
                        options: ['<header>', '<main>', '<section>', '<article>'],
                        answer: '1',
                        analysis: '<main>æ ‡ç­¾å®šä¹‰æ–‡æ¡£çš„ä¸»è¦å†…å®¹ï¼Œä¸€ä¸ªæ–‡æ¡£ä¸­åº”è¯¥åªæœ‰ä¸€ä¸ª<main>å…ƒç´ ã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 2,
                        category: 'HTML5',
                        tags: ['HTML', 'è¯­ä¹‰åŒ–æ ‡ç­¾']
                    },
                    {
                        id: 'rich_pub_2_' + Date.now(),
                        content: 'CSSä¸­ï¼Œå“ªä¸ªå±æ€§ç”¨äºè®¾ç½®å…ƒç´ çš„å¤–è¾¹è·ï¼Ÿ',
                        type: 'single',
                        options: ['padding', 'border', 'margin', 'spacing'],
                        answer: '2',
                        analysis: 'marginå±æ€§ç”¨äºè®¾ç½®å…ƒç´ çš„å¤–è¾¹è·ï¼Œæ§åˆ¶å…ƒç´ ä¸å…¶ä»–å…ƒç´ ä¹‹é—´çš„è·ç¦»ã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 1,
                        category: 'CSSåŸºç¡€',
                        tags: ['CSS', 'ç›’æ¨¡å‹']
                    },
                    {
                        id: 'rich_pub_3_' + Date.now(),
                        content: 'JavaScriptä¸­ï¼Œä»¥ä¸‹å“ªä¸ªæ–¹æ³•ç”¨äºå‘æ•°ç»„æœ«å°¾æ·»åŠ å…ƒç´ ï¼Ÿ',
                        type: 'single',
                        options: ['push()', 'pop()', 'shift()', 'unshift()'],
                        answer: '0',
                        analysis: 'push()æ–¹æ³•å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 1,
                        category: 'JavaScript',
                        tags: ['JS', 'æ•°ç»„æ–¹æ³•']
                    },
                    {
                        id: 'rich_pub_4_' + Date.now(),
                        content: 'Vue 3ä¸­ï¼Œå“ªä¸ªAPIç”¨äºåˆ›å»ºå“åº”å¼å¼•ç”¨ï¼Ÿ',
                        type: 'single',
                        options: ['ref()', 'reactive()', 'computed()', 'watch()'],
                        answer: '0',
                        analysis: 'ref()å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªå“åº”å¼çš„å¼•ç”¨å¯¹è±¡ï¼Œä¸»è¦ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼å¤„ç†ã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 2,
                        category: 'Vue 3',
                        tags: ['Vue', 'Composition API']
                    },
                    {
                        id: 'rich_pub_5_' + Date.now(),
                        content: 'ä»¥ä¸‹å“ªäº›æ˜¯HTTPçš„è¯·æ±‚æ–¹æ³•ï¼Ÿ',
                        type: 'multiple',
                        options: ['GET', 'POST', 'PUT', 'DELETE', 'FETCH'],
                        answer: '0,1,2,3',
                        analysis: 'HTTPçš„ä¸»è¦è¯·æ±‚æ–¹æ³•åŒ…æ‹¬GETã€POSTã€PUTã€DELETEç­‰ï¼ŒFETCHä¸æ˜¯HTTPæ–¹æ³•ï¼Œè€Œæ˜¯æµè§ˆå™¨APIã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 2,
                        category: 'ç½‘ç»œåè®®',
                        tags: ['HTTP', 'è¯·æ±‚æ–¹æ³•']
                    }
                ];
                
                const richDemoPersonalQuestions = [
                    {
                        id: 'rich_per_1_' + Date.now(),
                        content: 'Vueç»„ä»¶çš„dataé€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚',
                        type: 'judge',
                        answer: 'true',
                        analysis: 'åœ¨Vueç»„ä»¶ä¸­ï¼Œdataé€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ ·æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ç‹¬ç«‹çš„æ•°æ®å‰¯æœ¬ï¼Œé¿å…æ•°æ®æ±¡æŸ“ã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 2,
                        category: 'Vue',
                        tags: ['Vue', 'ç»„ä»¶', 'dataé€‰é¡¹']
                    },
                    {
                        id: 'rich_per_2_' + Date.now(),
                        content: 'CSS Gridå¸ƒå±€å¯ä»¥åˆ›å»ºäºŒç»´å¸ƒå±€ã€‚',
                        type: 'judge',
                        answer: 'true',
                        analysis: 'CSS Gridæ˜¯ä¸€ä¸ªäºŒç»´å¸ƒå±€ç³»ç»Ÿï¼Œå¯ä»¥åŒæ—¶å¤„ç†è¡Œå’Œåˆ—çš„å¸ƒå±€ï¼Œæ¯”Flexboxæ›´å¼ºå¤§ã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 3,
                        category: 'CSSé«˜çº§',
                        tags: ['CSS', 'Gridå¸ƒå±€']
                    },
                    {
                        id: 'rich_per_3_' + Date.now(),
                        content: 'JavaScriptæ˜¯å¼ºç±»å‹è¯­è¨€ã€‚',
                        type: 'judge',
                        answer: 'false',
                        analysis: 'JavaScriptæ˜¯å¼±ç±»å‹ï¼ˆåŠ¨æ€ç±»å‹ï¼‰è¯­è¨€ï¼Œå˜é‡çš„ç±»å‹å¯ä»¥åœ¨è¿è¡Œæ—¶æ”¹å˜ï¼Œä¸éœ€è¦æå‰å£°æ˜ç±»å‹ã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 2,
                        category: 'JavaScript',
                        tags: ['JS', 'ç±»å‹ç³»ç»Ÿ']
                    },
                    {
                        id: 'rich_per_4_' + Date.now(),
                        content: 'Reactä¸­ï¼Œä»¥ä¸‹å“ªä¸ªé’©å­ç”¨äºåœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œå‰¯ä½œç”¨ï¼Ÿ',
                        type: 'single',
                        options: ['useState', 'useEffect', 'useContext', 'useReducer'],
                        answer: '1',
                        analysis: 'useEffecté’©å­ç”¨äºå¤„ç†Reactç»„ä»¶ä¸­çš„å‰¯ä½œç”¨ï¼Œç›¸å½“äºclassç»„ä»¶ä¸­çš„componentDidMountã€componentDidUpdateå’ŒcomponentWillUnmountçš„ç»„åˆã€‚',
                        source: 'rich-demo',
                        createTime: new Date().toISOString(),
                        difficulty: 3,
                        category: 'React',
                        tags: ['React', 'Hooks', 'useEffect']
                    }
                ];
                
                // æ ¹æ®åŒæ­¥ç±»å‹æ·»åŠ é¢˜ç›®
                if (syncType === 'both' || syncType === 'public') {
                    // å…ˆæ·»åŠ ç°æœ‰é¢˜ç›®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
                    publicQuestions = [...this.publicQuestionBank];
                    this.log(`ğŸ“š å½“å‰å…¬å…±é¢˜åº“æœ‰ ${publicQuestions.length} é“é¢˜`);
                    
                    // æ— è®ºå¦‚ä½•éƒ½æ·»åŠ æ¼”ç¤ºé¢˜ç›®ï¼Œç¡®ä¿æœ‰æ•°æ®
                    publicQuestions.push(...richDemoPublicQuestions);
                    this.log(`ğŸ“š æ·»åŠ æ¼”ç¤ºåå…¬å…±é¢˜åº“æœ‰ ${publicQuestions.length} é“é¢˜`);
                }
                
                if (syncType === 'both' || syncType === 'personal') {
                    // å…ˆæ·»åŠ ç°æœ‰é¢˜ç›®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
                    personalQuestions = [...this.personalQuestionBank];
                    this.log(`ğŸ“ å½“å‰ä¸ªäººé¢˜åº“æœ‰ ${personalQuestions.length} é“é¢˜`);
                    
                    // æ— è®ºå¦‚ä½•éƒ½æ·»åŠ æ¼”ç¤ºé¢˜ç›®ï¼Œç¡®ä¿æœ‰æ•°æ®
                    personalQuestions.push(...richDemoPersonalQuestions);
                    this.log(`ğŸ“ æ·»åŠ æ¼”ç¤ºåä¸ªäººé¢˜åº“æœ‰ ${personalQuestions.length} é“é¢˜`);
                }
                
                this.log(`âœ… æ€»å…±å‡†å¤‡äº† ${publicQuestions.length + personalQuestions.length} é“é¢˜ç›®ç”¨äºåŒæ­¥`);
                
                // åˆ›å»ºåŒæ­¥æ•°æ®å¯¹è±¡ - ä¿®å¤ç‰ˆæœ¬ï¼šç›´æ¥åœ¨dataå¯¹è±¡ä¸­åŒ…å«é¢˜ç›®æ•°æ®
                const syncData = {
                    deviceId: this.getDeviceId(),
                    timestamp: Date.now(),
                    syncType: syncType,
                    syncCount: publicQuestions.length + personalQuestions.length,
                    publicQuestionCount: publicQuestions.length,
                    personalQuestionCount: personalQuestions.length,
                    data: {
                        deviceInfo: {
                            type: 'desktop',
                            browser: navigator.userAgent,
                            timestamp: Date.now(),
                            syncType: syncType
                        },
                        // ç›´æ¥æ·»åŠ é¢˜ç›®æ•°æ®ï¼Œç¡®ä¿ä¸€å®šåŒ…å«é¢˜ç›®
                        publicQuestions: publicQuestions,
                        personalQuestions: personalQuestions
                    }
                };
                
                // é¢å¤–çš„éªŒè¯å’Œæ—¥å¿—
                this.log('ğŸ” åŒæ­¥æ•°æ®éªŒè¯:');
                this.log('   - å…¬å…±é¢˜ç›®æ•°é‡:', syncData.data.publicQuestions ? syncData.data.publicQuestions.length : 0);
                this.log('   - ä¸ªäººé¢˜ç›®æ•°é‡:', syncData.data.personalQuestions ? syncData.data.personalQuestions.length : 0);
                this.log('   - æ€»é¢˜ç›®æ•°é‡:', syncData.syncCount);
                
                // ç”Ÿæˆæœ€ç»ˆçš„ç¼–ç æ•°æ®
                const syncDataString = JSON.stringify(syncData, null, 2);
                const encodedData = btoa(syncDataString);
                
                this.log(`âœ… åŒæ­¥æ•°æ®ç”Ÿæˆå®Œæˆï¼Œç±»å‹: ${syncType}`);
                this.log(`ğŸ“Š å…¬å…±é¢˜ç›®: ${publicQuestions.length} é“, ä¸ªäººé¢˜ç›®: ${personalQuestions.length} é“, æ€»å…±: ${syncData.syncCount} é“é¢˜`);
                this.log(`ğŸ“ æ•°æ®å¤§å°: ${encodedData.length} å­—ç¬¦`);
                this.log(`ğŸ“‹ æ•°æ®å†…å®¹: ${syncDataString.substring(0, 200)}...`);
                
                return encodedData;
            }

            addDemoQuestions() {
                const demoPublicQuestions = [
                    {
                        id: 'demo_pub_' + Date.now() + '_1',
                        content: 'HTMLä¸­ï¼Œå“ªä¸ªæ ‡ç­¾ç”¨äºå®šä¹‰è¡¨æ ¼ï¼Ÿ',
                        type: 'single',
                        options: ['<table>', '<tr>', '<td>', '<div>'],
                        answer: '0',
                        analysis: '<table>æ ‡ç­¾ç”¨äºå®šä¹‰HTMLè¡¨æ ¼ã€‚',
                        source: 'demo',
                        createTime: new Date().toISOString(),
                        difficulty: 1,
                        category: 'HTMLåŸºç¡€',
                        tags: ['HTML', 'è¡¨æ ¼']
                    },
                    {
                        id: 'demo_pub_' + Date.now() + '_2',
                        content: 'CSSä¸­ï¼Œå“ªä¸ªå±æ€§ç”¨äºè®¾ç½®æ–‡æœ¬é¢œè‰²ï¼Ÿ',
                        type: 'single',
                        options: ['font-color', 'text-color', 'color', 'text-style'],
                        answer: '2',
                        analysis: 'colorå±æ€§ç”¨äºè®¾ç½®æ–‡æœ¬çš„é¢œè‰²ã€‚',
                        source: 'demo',
                        createTime: new Date().toISOString(),
                        difficulty: 1,
                        category: 'CSSåŸºç¡€',
                        tags: ['CSS', 'æ–‡æœ¬æ ·å¼']
                    }
                ];

                const demoPersonalQuestions = [
                    {
                        id: 'demo_per_' + Date.now() + '_1',
                        content: 'JavaScriptä¸­ï¼Œnullæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚',
                        type: 'judge',
                        answer: 'true',
                        analysis: 'åœ¨JavaScriptä¸­ï¼Œtypeof null è¿”å› "object"ï¼Œè¿™æ˜¯JavaScriptçš„ä¸€ä¸ªå†å²é—ç•™é—®é¢˜ã€‚',
                        source: 'demo',
                        createTime: new Date().toISOString(),
                        difficulty: 2,
                        category: 'JavaScript',
                        tags: ['JS', 'æ•°æ®ç±»å‹']
                    }
                ];

                this.publicQuestionBank.push(...demoPublicQuestions);
                this.personalQuestionBank.push(...demoPersonalQuestions);
                this.saveData();
                
                this.log(`âœ… æ·»åŠ äº† ${demoPublicQuestions.length} é“å…¬å…±é¢˜ç›®å’Œ ${demoPersonalQuestions.length} é“ä¸ªäººé¢˜ç›®`);
                this.updateStats();
            }

            clearAllData() {
                this.publicQuestionBank = [];
                this.personalQuestionBank = [];
                localStorage.removeItem('publicQuestionBank');
                localStorage.removeItem('personalQuestionBank');
                this.log('ğŸ—‘ï¸ å·²æ¸…ç©ºæ‰€æœ‰é¢˜åº“æ•°æ®');
                this.updateStats();
            }

            updateStats() {
                document.getElementById('publicCount').textContent = this.publicQuestionBank.length;
                document.getElementById('personalCount').textContent = this.personalQuestionBank.length;
                document.getElementById('totalCount').textContent = this.publicQuestionBank.length + this.personalQuestionBank.length;
                document.getElementById('deviceId').textContent = this.getDeviceId();
            }

            log(...messages) {
                const logContainer = document.getElementById('logContainer');
                const logEntry = document.createElement('div');
                const timestamp = new Date().toLocaleTimeString('zh-CN');
                logEntry.innerHTML = `<span class="text-gray-500">[${timestamp}]</span> ${messages.map(msg => 
                    typeof msg === 'object' ? JSON.stringify(msg) : msg
                ).join(' ')}`;
                logContainer.appendChild(logEntry);
                logContainer.scrollTop = logContainer.scrollHeight;
                
                // é™åˆ¶æ—¥å¿—æ¡ç›®æ•°é‡
                if (logContainer.children.length > 100) {
                    logContainer.removeChild(logContainer.firstChild);
                }
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        const examSystem = new MockExamSystem();

        // ç”ŸæˆäºŒç»´ç 
        function generateQRCode() {
            const syncType = document.getElementById('syncType').value;
            const encodedData = examSystem.generateSyncQRData(syncType);
            
            // æ˜¾ç¤ºäºŒç»´ç åŒºåŸŸ
            document.getElementById('qrCodeSection').classList.remove('hidden');
            document.getElementById('dataSection').classList.add('hidden');
            
            // æ¸…ç©ºä¹‹å‰çš„äºŒç»´ç 
            const qrcodeContainer = document.getElementById('qrcode');
            qrcodeContainer.innerHTML = '';
            
            // ç”Ÿæˆæ–°çš„äºŒç»´ç 
            QRCode.toCanvas(qrcodeContainer, encodedData, {
                width: 300,
                margin: 2,
                color: {
                    dark: '#000000',
                    light: '#ffffff'
                }
            }, function (error) {
                if (error) {
                    examSystem.log('âŒ äºŒç»´ç ç”Ÿæˆå¤±è´¥:', error.message);
                } else {
                    examSystem.log('âœ… äºŒç»´ç ç”ŸæˆæˆåŠŸ');
                }
            });
        }

        // ç”Ÿæˆæ•°æ®
        function generateData() {
            const syncType = document.getElementById('syncType').value;
            const encodedData = examSystem.generateSyncQRData(syncType);
            
            // è§£ç æ•°æ®ä»¥ä¾¿æ˜¾ç¤º
            const decodedData = JSON.parse(atob(encodedData));
            const formattedData = JSON.stringify(decodedData, null, 2);
            
            // æ˜¾ç¤ºæ•°æ®åŒºåŸŸ
            document.getElementById('dataSection').classList.remove('hidden');
            document.getElementById('qrCodeSection').classList.add('hidden');
            
            // æ˜¾ç¤ºæ•°æ®
            document.getElementById('syncData').textContent = formattedData;
        }

        // å¤åˆ¶æ•°æ®
        function copyData() {
            const syncData = document.getElementById('syncData').textContent;
            navigator.clipboard.writeText(syncData).then(() => {
                examSystem.log('ğŸ“‹ æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                alert('æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(err => {
                examSystem.log('âŒ å¤åˆ¶å¤±è´¥:', err.message);
            });
        }

        // äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('generateQRBtn').addEventListener('click', generateQRCode);
        document.getElementById('generateDataBtn').addEventListener('click', generateData);
        document.getElementById('clearStorageBtn').addEventListener('click', () => {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿ')) {
                examSystem.clearAllData();
            }
        });
        document.getElementById('addDemoDataBtn').addEventListener('click', () => {
            examSystem.addDemoQuestions();
        });
        document.getElementById('copyDataBtn').addEventListener('click', copyData);
        document.getElementById('clearLogBtn').addEventListener('click', () => {
            document.getElementById('logContainer').innerHTML = '';
            examSystem.log('ğŸ§¹ æ—¥å¿—å·²æ¸…ç©º');
        });

        // åˆå§‹åŒ–æ˜¾ç¤º
        examSystem.log('ğŸš€ æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
        examSystem.log('ğŸ“± è®¾å¤‡ID:', examSystem.getDeviceId());
        examSystem.updateStats();
    </script>
</body>
</html>